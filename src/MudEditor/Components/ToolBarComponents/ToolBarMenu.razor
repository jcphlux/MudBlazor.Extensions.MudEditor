@inherits ToolBarBase
@namespace MudBlazor.Extensions.ToolBarComponents

<MudMenu Dense="true" @ref="_menu" Icon="@_selectedOption.Icon" Color="@(Active ? ActiveColor : Color)" ListClass="py-0" PopoverClass="pa-0" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomLeft">
    <CascadingValue Value="@Editor">
        <CascadingValue Value="@Option">
            <ToolBarBtnGroup VerticalAlign="true"/>
        </CascadingValue>
    </CascadingValue>
</MudMenu>

@code {
    private MudMenu _menu = null!;
    private ToolBarOption _selectedOption = null!;

    protected override void OnParametersSet() {
        _selectedOption = Option.Options![0];
        base.OnParametersSet();
    }

    protected override void OnValueChanged() {
        _selectedOption = Option.Options!.FirstOrDefault(o => Value.IsActive(o.AttribValue), Option.Options![0]);
        _menu.CloseMenu();

    }

}