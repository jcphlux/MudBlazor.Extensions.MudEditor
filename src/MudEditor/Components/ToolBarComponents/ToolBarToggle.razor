@inherits ToolBarBase
@namespace MudBlazor.Extensions.ToolBarComponents
<MudIconButton Color="@(Active? Editor.ToolBarActiveColor: Editor.ToolBarColor)" Icon="@_selectedOption.Icon" OnClick="@ToggleValue" Size="Size.Small" Title="@_selectedOption.Label" Variant="@Editor.ToolBarVariant"></MudIconButton>
@code {
    private ToolBarOption _selectedOption = null!;

    protected override void OnValueChanged() {
        _selectedOption = Value == null ? 
            Option.Options.FirstOrDefault(o => o.AttribValue == null, Option.Options[0]) : 
            Option.Options.First(o=> Value!.Equals(o.AttribValue));
    }

    private async void ToggleValue() {
        var option = Option.Options.First(o=> Value != o.AttribValue);
        await Editor.SetFormat(option.Attrib, option.AttribValue);
    }
}